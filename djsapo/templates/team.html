{% extends "datatables.html" %}
{% block extra_javascript %}
{{block.super}}
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-sortablejs@latest/jquery-sortable.js"></script>
<script>
// With options:
$('#matrix').sortable({
  invertSwap: true,
    group: {
        name: 'shared'
    },
    animation: 150,
    sort: false,
    onAdd: function (evt) {
        console.log(evt);
    },
    onRemove: function (evt) {
        console.log(evt);
    }
});
$('#team-members').sortable({
    group: 'shared',
    animation: 150,
    sort: false,
    onAdd: function (evt) {
        console.log(evt);
    },
    onRemove: function (evt) {
        console.log(evt);
    }
})
</script>
{% endblock %}
{% block content %}
{% include "alert/student.header.inc.html" %}
<div class="container mb-4">
  <div class="row mb-3">
    <div class="col-lg-9">
      <h2>Alert Team Manager</h2>
      <p>
        Click on a person's name and drag the it from one side to the other.
        To add someone to the team, drag them from the left and drop them on the right.
        To remove someone from the team, drag them from the right to drop them on the left.
      </p>
    </div>
    <!-- /.col-lg-8 -->
  </div>
  <!-- /.row -->
  <div class="row mb-3">
    <div class="col-lg-6">
      <h4>SOS Matrix</h4>
      <div id="matrix" class="list-group col">
        {% for m in matrix %}
        <div class="list-group-item" data-mid="{{m.id}}">
            <i class="fa fa-arrows handle"></i>
            {{m.last_name}}, {{m.first_name}}
        </div>
        {% endfor %}
      </div>
    </div>
    <!-- /.col-lg-6 -->
    <div class="col-lg-6">
      <h4>Current Team</h4>
      <div id="team-members" class="list-group col">
        {% for m in data.team.all %}
          {% if m.status %}
            <div class="list-group-item" data-uid="{{m.user.id}}">
              <i class="fa fa-arrows handle"></i>
              {{m.user.last_name}}, {{m.user.first_name}}
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <!-- /.col-lg-6 -->
  </div>
  <!-- /.row -->
  <div class="row">
    <div class="col-lg-9">
      <h3>Ad Hoc Member</h3>
      <p>
        If you do not see the person in the lists above that you would like
        to add to the team, you can do so with the following form.
      </p>
    </div>
    <!-- /.col-lg-8 -->
  </div>
  <!-- /.row -->
  <div class="row">
    <div class="col-lg-6">
      <div class="panel">
        <div class="panel-body">
        </div>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
    <!-- /.col-lg-6 -->
  </div>
  <!-- /.row -->
</div>
<!-- /.container -->
{% endblock content %}
